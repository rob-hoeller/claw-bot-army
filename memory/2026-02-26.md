# Daily Memory — 2026-02-26

## Claude Code Agent Teams Integration

### What Was Done
- Installed Claude Code CLI v2.1.59 globally via `npm install -g @anthropic-ai/claude-code`
- Created `~/.claude/settings.json` with agent teams flag enabled and API key
- Added `CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1` to `.bashrc` for shell sessions
- Installed `claude-code-teams` skill from ClawHub (v1.0.0 by matthew-a-gordon)
- Validated setup: CLI ✅, tmux ✅, env var ✅, templates ✅
- 6 workflow templates available: parallel-review, competing-hypotheses, fullstack-feature, architecture-decision, bottleneck-analysis, inventory-classification

### Architecture Change
- **Before:** HBx uses `sessions_spawn` for sequential hub-and-spoke delegation
- **After:** Can now also use Claude Code Agent Teams for parallel collaborative execution
- Both modes coexist — sessions_spawn for async background tasks, agent teams for intensive parallel work
- Teams require interactive PTY (SSH in, run `claude --teammate-mode tmux`)

### Integration Status
- Claude Code CLI: ✅ installed
- Settings + env var: ✅ configured
- Skill + templates: ✅ installed
- OpenClaw `coding-agent` skill: ✅ ready
- First team spawn: ⏳ pending — needs interactive SSH session to launch

### VPS Hardening — COMPLETED
- ✅ UFW firewall enabled: default deny incoming, allow outgoing
- ✅ SSH restricted to Tailscale interface only (`allow in on tailscale0 to any port 22`)
- ✅ All Tailscale traffic allowed (`allow in on tailscale0`)
- ✅ Port 8090 (hbx-monitoring.service) blocked from public internet (behind UFW)
- ✅ OpenClaw gateway on loopback — unaffected by firewall
- ⚠️ Tailscale Funnel still enabled (OpenClaw audit still flags as CRITICAL)
- ⚠️ Gateway password in config file (not env var)
- ⚠️ OpenClaw update available: 2026.2.24

### Parallel Agent Execution — VALIDATED
- `claude -p` mode works with ANTHROPIC_API_KEY env var (no OAuth needed)
- Two Sonnet agents ran in parallel successfully (Product Architect + QA Engineer)
- Both reviewed Header.tsx and found overlapping + complementary issues
- Pattern: `claude -p "task" --model sonnet --output-format text` in background exec
- Limitation: No inter-agent messaging in -p mode (need --teammate-mode tmux + OAuth for that)

### Pending
- One-time OAuth for full interactive team mode (--teammate-mode tmux) — Rob helping
- OpenClaw update to 2026.2.24 — Rob helping
- ✅ Tailscale Funnel → Serve (completed, 0 critical findings now)

### Next Major Initiative: Full HBx Codebase Audit & Refactor
Lance requested a comprehensive team review of the entire HBx dashboard codebase once agent teams are fully connected. Scope:
- Full code quality audit (all 121 files in dashboard/src)
- Fix inefficiencies, dead code, inconsistent patterns
- Improve performance, accessibility, type safety
- PRESERVE what works well — especially the agent detail panel with chat (Lance likes it)
- Multi-agent parallel review: IN1 (architecture), IN2 (code quality), IN6 (QA/edge cases)
- Then targeted refactoring sprints per finding
- Gate: agent team OAuth must be complete first for full inter-agent coordination
